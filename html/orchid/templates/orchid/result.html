{% extends "orchid/base_layout.html" %}

{% block title %}Photo Identity | OrchiD{% endblock %}

{% block content %}
<h2>Photo Identity</h2>

<p>
    <div id="identity"></div>
</p>

<p>
    <img src="{{ photo.photo.url }}" class="img-responsive img-rounded" alt="Photo">
</p>
{% endblock %}

{% block scripts %}
<script>
jQuery( document ).ready(function( $ ) {
    $("#identity").html('<div class="alert alert-info" role="alert"><i class="fa fa-gear fa-fw"></i> Please wait while we identify your photo...</div>');
    $.ajax({
        url: "{% url 'orchid:identify' photo.id %}",
        dataType: "html"
    }).done(function(data) {
        // Display the result.
        $("#identity").html(data);

        // Initialize Bootstrap Popovers.
        $("a[data-toggle='popover']")
            .popover({html: true, trigger: 'focus'})
            .click(function(event) {
                return false;
            });
    });
});
</script>
{% endblock %}
