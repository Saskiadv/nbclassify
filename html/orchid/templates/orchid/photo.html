{% extends "orchid/base_layout.html" %}

{% block title %}Identify Photo | OrchiD{% endblock %}

{% block content %}
<h2>Identify Photo</h2>

<p>Click "Identify Photo" to identify this photo.</p>

<form action="{% url 'orchid:identify' photo.id %}" method="post" id="identify_form">
    {% csrf_token %}
    <button type="submit" class="pure-button pure-button-primary nbc"><i class="fa fa-search fa-fw"></i> Identify Photo</button>
</form>

<p>
    <div id="identity"></div>
</p>

<p>
    <img src="{{ photo.photo.url }}" class="img-responsive img-rounded" alt="Photo">
</p>
{% endblock %}

{% block scripts %}
<script>
jQuery( document ).ready(function( $ ) {
    $('#identify_form button').click(function(event) {
        $("#identity").html('<div class="alert alert-info" role="alert"><i class="fa fa-gear fa-fw"></i> Please wait while we identify your photo...</div>');

        $("#identify_form").ajaxForm({
            target: '#identity',
            success: function() {
                // Initialize Bootstrap Popovers.
                $("a[data-toggle='popover']")
                    .popover({html: true, trigger: 'focus'})
                    .click(function(event) {
                        return false;
                    });
            }
        }).submit();

        // Prevent normal browser submit and page navigation.
        return false;
    });
});
</script>
{% endblock %}
